<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Password | Cryptella</title>
  <link rel="icon" href="{{ url_for('static', filename='logo.png') }}" type="image/png"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
</head>

<body class="dashboard-body">

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-logo">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Cryptella Logo" height="28">
    </div>
    <ul class="sidebar-links">
      <li><a href="{{ url_for('routes.vault') }}">Dashboard</a></li>
      <li><a href="{{ url_for('routes.add_password') }}" class="active">Add Password</a></li>
      <li><a href="{{ url_for('routes.passwords') }}">Passwords</a></li>
      <li><a href="{{ url_for('routes.settings') }}">Settings</a></li>
      <li><a href="{{ url_for('routes.logout') }}">Logout</a></li>
    </ul>
  </div>

<!-- Main Content -->
<div class="main-content">
    <div class="top-navbar">
      <span>Add New Password</span>
    </div>
  
    <div class="form-container">
      <form method="POST" action="{{ url_for('routes.add_password') }}" class="stacked-form" autocomplete="off">
  
        <!-- Service -->
        <label for="account_name">Service Name</label>
        <input type="text" id="account_name" name="account_name" placeholder="e.g. Gmail, Netflix" required autocomplete="off">
  
        <!-- Username -->
        <label for="username">Username or Email</label>
        <input type="text" id="username" name="username" placeholder="e.g. you@email.com" required autocomplete="off">
  
        <!-- Password Field with Toggle -->
        <!-- Password Field -->
        <label for="password">Password</label>
        <input type="password" id="password" name="password" placeholder="Enter or generate a password" required autocomplete="new-password">

        <!-- Generator Section -->
        <label>Or generate one:</label>
        <div class="generator-controls">
          <button type="button" class="btn light-purple" onclick="generatePassword()"> Generate Secure Password</button>
          <input type="text" id="generated-password" readonly placeholder="Generated password will appear here" />
          <button type="button" class="copy-btn" onclick="copyGeneratedPassword()"> Copy</button>
        </div>
  
        <!-- Strength Meter -->
        <div class="password-strength">
          <div id="strength-bar"></div>
          <span id="strength-text">Strength: â€”</span>
        </div>
  
        <!-- Submit -->
        <button id="saveButton" type="submit" class="btn primary">Save Password</button>
      </form>
    </div>
  </div>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <script id="flash-messages-json" type="application/json">
        {{ messages | tojson }}
      </script>
    {% endif %}
  {% endwith %}

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
