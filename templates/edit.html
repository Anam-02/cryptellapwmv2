<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Edit Password | Cryptella</title>
  <link rel="icon" href="{{ url_for('static', filename='logo.png') }}" type="image/png"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
</head>

<body class="dashboard-body">

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-logo">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Cryptella Logo" height="28">
    </div>
    <ul class="sidebar-links">
      <li><a href="{{ url_for('routes.vault') }}">Dashboard</a></li>
      <li><a href="{{ url_for('routes.add_password') }}">Add Password</a></li>
      <li><a href="{{ url_for('routes.passwords') }}">Passwords</a></li>
      <li><a href="{{ url_for('routes.settings') }}">Settings</a></li>
      <li><a href="{{ url_for('routes.logout') }}">Logout</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="top-navbar">
      <span>Edit Password</span>
    </div>

    <div class="form-container">
      <form method="POST" action="{{ url_for('routes.edit_password', entry_id=entry.id) }}" class="stacked-form" autocomplete="off">
        
        <!-- Service -->
        <label for="account_name">Service Name</label>
        <input type="text" id="account_name" name="account_name" value="{{ entry.account_name }}" required autocomplete="off">

        <!-- Username -->
        <label for="username">Username or Email</label>
        <input type="text" id="username" name="username" value="{{ entry.username }}" required autocomplete="off">

        <!-- Password Field -->
        <label for="password">New Password</label>
        <input type="password" id="password" name="password" placeholder="Enter or generate a new password" required autocomplete="new-password">

        <!-- Generator Section -->
        <label>Or generate one:</label>
        <div class="generator-controls">
          <button type="button" class="btn light-purple" onclick="generatePassword()"> Generate Secure Password</button>
          <input type="text" id="generated-password" readonly placeholder="Generated password will appear here" />
          <button type="button" class="copy-btn" onclick="copyGeneratedPassword()"> Copy</button>
        </div>

        <!-- Strength Meter -->
        <div class="password-strength">
          <div id="strength-bar"></div>
          <span id="strength-text">Strength: —</span>
        </div>

        <!-- Buttons -->
        <div class="form-buttons">
          <button id="editPasswordButton" type="submit" class="btn primary">Save Changes</button>
          <a href="{{ url_for('routes.passwords') }}" class="btn secondary">← Back to Passwords</a>
        </div>
      </form>
    </div>
  </div>

  <!-- JS -->
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
